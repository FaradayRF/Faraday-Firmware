<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Faraday-Firmware: UART/UART_Services.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Faraday-Firmware
   &#160;<span id="projectnumber">1</span>
   </div>
   <div id="projectbrief">Firmware for the Faraday digital amateur radio</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_u_a_r_t___services_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">UART_Services.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Faraday UART Network Stack - Layer 4 Services.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="_u_a_r_t___services_8h_source.html">UART_Services.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_u_a_r_t___l4_8h_source.html">UART_L4.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac39388932b5ac795d3d6ff998e97080b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___services_8c.html#ac39388932b5ac795d3d6ff998e97080b">uart_send</a> (unsigned char service_number, unsigned char payload_length, unsigned char *payload)</td></tr>
<tr class="memdesc:ac39388932b5ac795d3d6ff998e97080b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Service used to send a payload over the UART layer 4 protocol.  <a href="#ac39388932b5ac795d3d6ff998e97080b">More...</a><br /></td></tr>
<tr class="separator:ac39388932b5ac795d3d6ff998e97080b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c0d24d8d457c63470ffbb2db2c442a0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___services_8c.html#a3c0d24d8d457c63470ffbb2db2c442a0">uart_service_open</a> (unsigned char service_number, void(*func_ptr)(void))</td></tr>
<tr class="memdesc:a3c0d24d8d457c63470ffbb2db2c442a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register an application receive FIFO.  <a href="#a3c0d24d8d457c63470ffbb2db2c442a0">More...</a><br /></td></tr>
<tr class="separator:a3c0d24d8d457c63470ffbb2db2c442a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06339d570ae0dbedeac4241dc829fc4d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___services_8c.html#a06339d570ae0dbedeac4241dc829fc4d">uart_service_close</a> (unsigned char service_number)</td></tr>
<tr class="memdesc:a06339d570ae0dbedeac4241dc829fc4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister an application receive FIFO.  <a href="#a06339d570ae0dbedeac4241dc829fc4d">More...</a><br /></td></tr>
<tr class="separator:a06339d570ae0dbedeac4241dc829fc4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2be40b37b3a664e9774ab390399c64df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___services_8c.html#a2be40b37b3a664e9774ab390399c64df">uart_stack_rx</a> (unsigned char service_number, unsigned char *data, unsigned char payload_len)</td></tr>
<tr class="memdesc:a2be40b37b3a664e9774ab390399c64df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Place data into an application receive FIFO.  <a href="#a2be40b37b3a664e9774ab390399c64df">More...</a><br /></td></tr>
<tr class="separator:a2be40b37b3a664e9774ab390399c64df"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Initializing UART Receive Service Port Function Pointer Array</div></td></tr>
<tr class="memitem:a0d630b625198aeaa78ea7a63ec72f4b3"><td class="memItemLeft" align="right" valign="top">volatile void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___services_8c.html#a0d630b625198aeaa78ea7a63ec72f4b3">srvc_open_func_ptrs</a> [UART_SERVICE_ELEMENT_COUNT])(unsigned char *data_pointer, unsigned char data_length)</td></tr>
<tr class="separator:a0d630b625198aeaa78ea7a63ec72f4b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Faraday UART Network Stack - Layer 4 Services. </p>
<p>This source file provides the layer 4 (TRANSPORT) layer protocol services. Providing service functions allows the protocol to be interacted with in an abstracted method that better suites layer isolation and layer modularity. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ac39388932b5ac795d3d6ff998e97080b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac39388932b5ac795d3d6ff998e97080b">&sect;&nbsp;</a></span>uart_send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uart_send </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>service_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>payload_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>payload</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Service used to send a payload over the UART layer 4 protocol. </p>
<p>A generic service used to send data over UART layer 4 protocol. This should be used as the main interface for the UART layer 4 protocol to send data.</p>
<dl class="section warning"><dt>Warning</dt><dd>Adhere to maximum transmissible unit limits </dd></dl>

</div>
</div>
<a id="a06339d570ae0dbedeac4241dc829fc4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06339d570ae0dbedeac4241dc829fc4d">&sect;&nbsp;</a></span>uart_service_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uart_service_close </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>service_number</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister an application receive FIFO. </p>
<p>This function removes an application receive FIFO from the assigned UART "service port" as assigned in <a class="el" href="_u_a_r_t___services_8h.html#ac39388932b5ac795d3d6ff998e97080b" title="Service used to send a payload over the UART layer 4 protocol. ">uart_send()</a>. </p>

</div>
</div>
<a id="a3c0d24d8d457c63470ffbb2db2c442a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c0d24d8d457c63470ffbb2db2c442a0">&sect;&nbsp;</a></span>uart_service_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uart_service_open </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>service_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void)&#160;</td>
          <td class="paramname"><em>func_ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register an application receive FIFO. </p>
<p>This function creates a function pointer to an application function refering to a specific UART "service port" when used and allows the UART layer 4 to place received data packets into the application FIFO without the UART layer 4 service having to include or know about the application!</p>
<dl class="section warning"><dt>Warning</dt><dd>Be sure that the function pointed to in the application adheres to the defined function expected per documentation. Unreliable operation may occure if this is not followed.</dd></dl>
<p>//expected function example: // void command_put(unsigned char *data_pointer, unsigned char length){ // put_fifo(&amp;command_state_machine, &amp;command_fifo_buffer, data_pointer); // __no_operation(); // } </p>

</div>
</div>
<a id="a2be40b37b3a664e9774ab390399c64df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2be40b37b3a664e9774ab390399c64df">&sect;&nbsp;</a></span>uart_stack_rx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uart_stack_rx </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>service_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>payload_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Place data into an application receive FIFO. </p>
<p>This is the main UART layer 4 service function that queries the registered applications in the function pointer array and if the UART "service port" has an assigned application the supplied data is placed into the applications FIFO.</p>
<dl class="section warning"><dt>Warning</dt><dd>Be sure that the function pointed to in the application adheres to the defined function expected per documentation. Unreliable operation may occure if this is not followed. </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a0d630b625198aeaa78ea7a63ec72f4b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d630b625198aeaa78ea7a63ec72f4b3">&sect;&nbsp;</a></span>srvc_open_func_ptrs</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile void(* srvc_open_func_ptrs[UART_SERVICE_ELEMENT_COUNT])(unsigned char *data_pointer, unsigned char data_length)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A function pointer array that holds the pointer to the functions where data will be put into when received on the "service port" </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_ebc9cec7537ff1d4a79631ef79929747.html">UART</a></li><li class="navelem"><a class="el" href="_u_a_r_t___services_8c.html">UART_Services.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.12 </li>
  </ul>
</div>
</body>
</html>
