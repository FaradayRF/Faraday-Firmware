<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Faraday-Firmware: UART/UART_L2.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Faraday-Firmware
   &#160;<span id="projectnumber">1</span>
   </div>
   <div id="projectbrief">Firmware for the Faraday digital amateur radio</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_u_a_r_t___l2_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">UART_L2.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Faraday UART Network Stack - Layer 2 Protocol.  
<a href="#details">More...</a></p>

<p><a href="_u_a_r_t___l2_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_u_a_r_t___l2___p_a_c_k_e_t.html">UART_L2_PACKET</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">UART Layer 2 Packet Definiton Structure.  <a href="struct_u_a_r_t___l2___p_a_c_k_e_t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_u_a_r_t___l2___p_a_c_k_e_t___m_s_p430___b_u_f_f_e_r.html">UART_L2_PACKET_MSP430_BUFFER</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">UART Layer 2 Transmit Framing State Machine.  <a href="struct_u_a_r_t___l2___p_a_c_k_e_t___m_s_p430___b_u_f_f_e_r.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">UART Layer 2 Receive Framing Definitions</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>UART layer 2 protocol receive framing definitions</p>
<p>These definitions define the constants used to define the layer 2 receive frame used in the layer 2 protocol. Constants such as start, stop, and escape bytes are defined. </p>
</div></td></tr>
<tr class="memitem:aee5e9357cbd40f30ab04e9d7ab627142"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#aee5e9357cbd40f30ab04e9d7ab627142">UART_DATALINK_RX_STATE_IDLE</a>&#160;&#160;&#160;0x00</td></tr>
<tr class="separator:aee5e9357cbd40f30ab04e9d7ab627142"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9e8e98b3a1b163151a6b35d8655fb05"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#ad9e8e98b3a1b163151a6b35d8655fb05">UART_DATALINK_RX_STATE_START</a>&#160;&#160;&#160;0x01</td></tr>
<tr class="separator:ad9e8e98b3a1b163151a6b35d8655fb05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebae2704586f4a8f51c6d044157437e6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#aebae2704586f4a8f51c6d044157437e6">UART_DATALINK_RX_STATE_ESC</a>&#160;&#160;&#160;0x02</td></tr>
<tr class="separator:aebae2704586f4a8f51c6d044157437e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cba2066ed80175b5935d6f7e3519a63"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#a4cba2066ed80175b5935d6f7e3519a63">UART_DATALINK_RX_STATE_STOP</a>&#160;&#160;&#160;0x03</td></tr>
<tr class="separator:a4cba2066ed80175b5935d6f7e3519a63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2953d4b6be54ba442841ddf34f5081c8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#a2953d4b6be54ba442841ddf34f5081c8">UART_DATALINK_RX_START_BYTE</a>&#160;&#160;&#160;0x7b</td></tr>
<tr class="separator:a2953d4b6be54ba442841ddf34f5081c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66de5275deafb24d531a959600a12f5c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#a66de5275deafb24d531a959600a12f5c">UART_DATALINK_RX_STOP_BYTE</a>&#160;&#160;&#160;0x7c</td></tr>
<tr class="separator:a66de5275deafb24d531a959600a12f5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90db6b3ebc6f2bce86eec1f080ebbfab"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#a90db6b3ebc6f2bce86eec1f080ebbfab">UART_DATALINK_RX_ESC_BYTE</a>&#160;&#160;&#160;0x7d</td></tr>
<tr class="separator:a90db6b3ebc6f2bce86eec1f080ebbfab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">UART Layer 2 Transmit Framing Definitions</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>UART layer 2 protocol transmit framing definitions</p>
<p>These definitions define the constants used to define the layer 2 transmit frame used in the layer 2 protocol. Constants such as start, stop, and escape bytes are defined. </p>
</div></td></tr>
<tr class="memitem:ae14d4bed55e863c40e70094249cbe1ac"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#ae14d4bed55e863c40e70094249cbe1ac">UART_DATALINK_FRAMING_START_BYTE</a>&#160;&#160;&#160;0x7b</td></tr>
<tr class="separator:ae14d4bed55e863c40e70094249cbe1ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2252b0f8428124b84eb325d640b0d8c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#ac2252b0f8428124b84eb325d640b0d8c">UART_DATALINK_FRAMING_STOP_BYTE</a>&#160;&#160;&#160;0x7c</td></tr>
<tr class="separator:ac2252b0f8428124b84eb325d640b0d8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad060e7a35921b7f17d8f6471b030d426"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#ad060e7a35921b7f17d8f6471b030d426">UART_DATALINK_FRAMING_ESC_BYTE</a>&#160;&#160;&#160;0x7d</td></tr>
<tr class="separator:ad060e7a35921b7f17d8f6471b030d426"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">UART Layer 2 Protocol Definitions</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>UART layer 2 protocol definitions that implement the higher level portions of the layer and packet structure</p>
<p>UART layer 2 protocol definitions that implement the higher level portions of the layer and packet structure. The default packet configuration and buffer sizes are defined here. </p>
</div></td></tr>
<tr class="memitem:a05f5d709605c6317c97e4974bec3402a"><td class="memItemLeft" align="right" valign="top"><a id="a05f5d709605c6317c97e4974bec3402a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>UART_TX_BUFFER_SIZE</b>&#160;&#160;&#160;128*3</td></tr>
<tr class="separator:a05f5d709605c6317c97e4974bec3402a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0ea160058c920ece859620a0e10f9c2"><td class="memItemLeft" align="right" valign="top"><a id="aa0ea160058c920ece859620a0e10f9c2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>UART_L2_PACKET_LENGTH</b>&#160;&#160;&#160;128</td></tr>
<tr class="separator:aa0ea160058c920ece859620a0e10f9c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82b9e4550d7410c7e373632a6d3d5b12"><td class="memItemLeft" align="right" valign="top"><a id="a82b9e4550d7410c7e373632a6d3d5b12"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>UART_L2_PAYLOAD_LENGTH</b>&#160;&#160;&#160;125</td></tr>
<tr class="separator:a82b9e4550d7410c7e373632a6d3d5b12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa90b86e5afa7bb4b5a3d1ef2a2031f45"><td class="memItemLeft" align="right" valign="top"><a id="aa90b86e5afa7bb4b5a3d1ef2a2031f45"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>UART_L2_PKT_TYPE_LOC</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:aa90b86e5afa7bb4b5a3d1ef2a2031f45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d9850bdf2e895e5c7fc6ab60ee23b79"><td class="memItemLeft" align="right" valign="top"><a id="a2d9850bdf2e895e5c7fc6ab60ee23b79"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>UART_L2_PKT_CONFIG_LOC</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a2d9850bdf2e895e5c7fc6ab60ee23b79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71b6bd0fa566658c039391eadd9f4056"><td class="memItemLeft" align="right" valign="top"><a id="a71b6bd0fa566658c039391eadd9f4056"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>UART_L2_PKT_PAYLOAD_LEN_LOC</b>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a71b6bd0fa566658c039391eadd9f4056"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22f3ce2ec69a1393fa2e1f9822da0cf5"><td class="memItemLeft" align="right" valign="top"><a id="a22f3ce2ec69a1393fa2e1f9822da0cf5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>UART_L2_PKT_HEADER_LEN_OFFSET</b>&#160;&#160;&#160;3</td></tr>
<tr class="separator:a22f3ce2ec69a1393fa2e1f9822da0cf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:adcf7a574c5d9de1ceb93d5b1a97ee547"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_u_a_r_t___l2___p_a_c_k_e_t.html">UART_L2_PACKET</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#adcf7a574c5d9de1ceb93d5b1a97ee547">UART_DATALINK_PACKET_STRUCT</a></td></tr>
<tr class="memdesc:adcf7a574c5d9de1ceb93d5b1a97ee547"><td class="mdescLeft">&#160;</td><td class="mdescRight">UART Layer 2 Packet Definiton Structure.  <a href="#adcf7a574c5d9de1ceb93d5b1a97ee547">More...</a><br /></td></tr>
<tr class="separator:adcf7a574c5d9de1ceb93d5b1a97ee547"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac53614c0c475db20de3fff04fb01b3c5"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_u_a_r_t___l2___p_a_c_k_e_t___m_s_p430___b_u_f_f_e_r.html">UART_L2_PACKET_MSP430_BUFFER</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#ac53614c0c475db20de3fff04fb01b3c5">UART_DATALINK_PACKET_MSP430_BUFFER_STRUCT</a></td></tr>
<tr class="memdesc:ac53614c0c475db20de3fff04fb01b3c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">UART Layer 2 Transmit Framing State Machine.  <a href="#ac53614c0c475db20de3fff04fb01b3c5">More...</a><br /></td></tr>
<tr class="separator:ac53614c0c475db20de3fff04fb01b3c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac7b3df0fa68526d64c732d5f916e34b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#ac7b3df0fa68526d64c732d5f916e34b1">init_uart</a> (void)</td></tr>
<tr class="memdesc:ac7b3df0fa68526d64c732d5f916e34b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize UART Layer 2 TX/RX State Machines.  <a href="#ac7b3df0fa68526d64c732d5f916e34b1">More...</a><br /></td></tr>
<tr class="separator:ac7b3df0fa68526d64c732d5f916e34b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63c4d64ae4f2bd7e735cd4f4004263c5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#a63c4d64ae4f2bd7e735cd4f4004263c5">uart_datalink_create_packet</a> (volatile <a class="el" href="_u_a_r_t___l2_8h.html#adcf7a574c5d9de1ceb93d5b1a97ee547">UART_DATALINK_PACKET_STRUCT</a> *buffer_struct, unsigned char packet_type, unsigned char packet_config, unsigned char payload_length, unsigned char *payload)</td></tr>
<tr class="memdesc:a63c4d64ae4f2bd7e735cd4f4004263c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create UART Layer 2 Packet.  <a href="#a63c4d64ae4f2bd7e735cd4f4004263c5">More...</a><br /></td></tr>
<tr class="separator:a63c4d64ae4f2bd7e735cd4f4004263c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc559fd267d9d8c575be67bd3e265351"><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#abc559fd267d9d8c575be67bd3e265351">uart_datalink_put_tx</a> (unsigned char packet_type, unsigned char packet_config, unsigned char payload_length, unsigned char *payload)</td></tr>
<tr class="memdesc:abc559fd267d9d8c575be67bd3e265351"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create and transmit UART layer 2 packet.  <a href="#abc559fd267d9d8c575be67bd3e265351">More...</a><br /></td></tr>
<tr class="separator:abc559fd267d9d8c575be67bd3e265351"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f4ea313a52dd3e9b9f680429024e54a"><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#a7f4ea313a52dd3e9b9f680429024e54a">uart_datalink_get_tx</a> (unsigned char *get_buffer_ptr)</td></tr>
<tr class="memdesc:a7f4ea313a52dd3e9b9f680429024e54a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a UART layer 2 packet from receive buffer.  <a href="#a7f4ea313a52dd3e9b9f680429024e54a">More...</a><br /></td></tr>
<tr class="separator:a7f4ea313a52dd3e9b9f680429024e54a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67bc69c3ef2e11e0372662a5ede276e2"><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#a67bc69c3ef2e11e0372662a5ede276e2">uart_datalink_isempty_tx</a> (void)</td></tr>
<tr class="memdesc:a67bc69c3ef2e11e0372662a5ede276e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if UART Layer 2 transmit buffer is empty.  <a href="#a67bc69c3ef2e11e0372662a5ede276e2">More...</a><br /></td></tr>
<tr class="separator:a67bc69c3ef2e11e0372662a5ede276e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13c914a747e1af18c9b68577d3c676c1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#a13c914a747e1af18c9b68577d3c676c1">uart_datalink_tx_housekeep</a> (void)</td></tr>
<tr class="memdesc:a13c914a747e1af18c9b68577d3c676c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">UART layer 2 transmit housekeeping.  <a href="#a13c914a747e1af18c9b68577d3c676c1">More...</a><br /></td></tr>
<tr class="separator:a13c914a747e1af18c9b68577d3c676c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4840060f1b1b517dd7ca2dfd9fdb2446"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#a4840060f1b1b517dd7ca2dfd9fdb2446">uart_tx_datalink_isr</a> (void)</td></tr>
<tr class="memdesc:a4840060f1b1b517dd7ca2dfd9fdb2446"><td class="mdescLeft">&#160;</td><td class="mdescRight">UART layer 2 transmit interrupt service routine.  <a href="#a4840060f1b1b517dd7ca2dfd9fdb2446">More...</a><br /></td></tr>
<tr class="separator:a4840060f1b1b517dd7ca2dfd9fdb2446"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad87829b6d6ba48eb341034a0ba17c5f1"><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#ad87829b6d6ba48eb341034a0ba17c5f1">uart_datalink_byte_isempty_rx</a> (void)</td></tr>
<tr class="memdesc:ad87829b6d6ba48eb341034a0ba17c5f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if UART Layer 2 receive buffer is empty.  <a href="#ad87829b6d6ba48eb341034a0ba17c5f1">More...</a><br /></td></tr>
<tr class="separator:ad87829b6d6ba48eb341034a0ba17c5f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a642642befe890ebd6eff7d8ccb003a4f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#a642642befe890ebd6eff7d8ccb003a4f">uart_datalink_rx_put_byte</a> (volatile unsigned char *data_byte)</td></tr>
<tr class="memdesc:a642642befe890ebd6eff7d8ccb003a4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Place a byte into the receive buffer for uart layer 2.  <a href="#a642642befe890ebd6eff7d8ccb003a4f">More...</a><br /></td></tr>
<tr class="separator:a642642befe890ebd6eff7d8ccb003a4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfced9c8c49fca45b437c389b356b498"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#abfced9c8c49fca45b437c389b356b498">uart_datalink_rx_housekeep</a> (void)</td></tr>
<tr class="memdesc:abfced9c8c49fca45b437c389b356b498"><td class="mdescLeft">&#160;</td><td class="mdescRight">UART layer 2 receive housekeeping.  <a href="#abfced9c8c49fca45b437c389b356b498">More...</a><br /></td></tr>
<tr class="separator:abfced9c8c49fca45b437c389b356b498"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a35d37b82cc1e3975df2f13a3779904"><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#a6a35d37b82cc1e3975df2f13a3779904">uart_datalink_rx_frame_parser_check_state</a> (void)</td></tr>
<tr class="memdesc:a6a35d37b82cc1e3975df2f13a3779904"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the current UART receiver byte frame parser state machine state.  <a href="#a6a35d37b82cc1e3975df2f13a3779904">More...</a><br /></td></tr>
<tr class="separator:a6a35d37b82cc1e3975df2f13a3779904"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c5d79acaccffa349f366585a9b944a5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#a0c5d79acaccffa349f366585a9b944a5">uart_datalink_rx_frame_parser_change_state</a> (unsigned char state)</td></tr>
<tr class="memdesc:a0c5d79acaccffa349f366585a9b944a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change the current state of the receive byte frame parser state machine.  <a href="#a0c5d79acaccffa349f366585a9b944a5">More...</a><br /></td></tr>
<tr class="separator:a0c5d79acaccffa349f366585a9b944a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dd8b8c8ac31926f0d3a3bc05fec28a6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#a0dd8b8c8ac31926f0d3a3bc05fec28a6">uart_datalink_rx_frame_parser_state_idle</a> (unsigned char new_byte)</td></tr>
<tr class="memdesc:a0dd8b8c8ac31926f0d3a3bc05fec28a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">UART layer 2 receiver frame parser IDLE state routine.  <a href="#a0dd8b8c8ac31926f0d3a3bc05fec28a6">More...</a><br /></td></tr>
<tr class="separator:a0dd8b8c8ac31926f0d3a3bc05fec28a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9d26f59f7a919d9e2c8ebcf71a34d0c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#ab9d26f59f7a919d9e2c8ebcf71a34d0c">uart_datalink_rx_frame_parser_state_start</a> (unsigned char new_byte)</td></tr>
<tr class="memdesc:ab9d26f59f7a919d9e2c8ebcf71a34d0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">UART layer 2 receiver frame parser START state routine.  <a href="#ab9d26f59f7a919d9e2c8ebcf71a34d0c">More...</a><br /></td></tr>
<tr class="separator:ab9d26f59f7a919d9e2c8ebcf71a34d0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac032a2e63152c8832e5c1884881076e6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#ac032a2e63152c8832e5c1884881076e6">uart_datalink_rx_frame_parser_state_stop</a> (void)</td></tr>
<tr class="memdesc:ac032a2e63152c8832e5c1884881076e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">UART layer 2 receiver frame parser STOP state routine.  <a href="#ac032a2e63152c8832e5c1884881076e6">More...</a><br /></td></tr>
<tr class="separator:ac032a2e63152c8832e5c1884881076e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a960448902e9fadb313a6f19103d9a35b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#a960448902e9fadb313a6f19103d9a35b">uart_datalink_rx_frame_parser_state_esc</a> (unsigned char new_byte)</td></tr>
<tr class="memdesc:a960448902e9fadb313a6f19103d9a35b"><td class="mdescLeft">&#160;</td><td class="mdescRight">UART layer 2 receiver frame parser ESCAPE state routine.  <a href="#a960448902e9fadb313a6f19103d9a35b">More...</a><br /></td></tr>
<tr class="separator:a960448902e9fadb313a6f19103d9a35b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad11fa669cfb8134e56b1aed868f4560"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#aad11fa669cfb8134e56b1aed868f4560">uart_datalink_rx_framer_parser_parse_byte</a> (unsigned char new_byte)</td></tr>
<tr class="memdesc:aad11fa669cfb8134e56b1aed868f4560"><td class="mdescLeft">&#160;</td><td class="mdescRight">UART layer 2 receiver high level state machine parser.  <a href="#aad11fa669cfb8134e56b1aed868f4560">More...</a><br /></td></tr>
<tr class="separator:aad11fa669cfb8134e56b1aed868f4560"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80a393448695d1ec96dce4f9094a783a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_u_a_r_t___l2_8h.html#a80a393448695d1ec96dce4f9094a783a">uart_datalink_rx_pass_higher_layer</a> (unsigned char datagram_len, unsigned char *datagram)</td></tr>
<tr class="memdesc:a80a393448695d1ec96dce4f9094a783a"><td class="mdescLeft">&#160;</td><td class="mdescRight">UART layer 2 receiver higher OSI layer interface.  <a href="#a80a393448695d1ec96dce4f9094a783a">More...</a><br /></td></tr>
<tr class="separator:a80a393448695d1ec96dce4f9094a783a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Faraday UART Network Stack - Layer 2 Protocol. </p>
<p>This header file provides the layer 2 (datalink) layer protocol of the Faraday UART network stack. This layer provides byte framing between the CC430 hardware UART and defines a layer 2 protocol. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad060e7a35921b7f17d8f6471b030d426"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad060e7a35921b7f17d8f6471b030d426">&sect;&nbsp;</a></span>UART_DATALINK_FRAMING_ESC_BYTE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_DATALINK_FRAMING_ESC_BYTE&#160;&#160;&#160;0x7d</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Escape Byte </p>

</div>
</div>
<a id="ae14d4bed55e863c40e70094249cbe1ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae14d4bed55e863c40e70094249cbe1ac">&sect;&nbsp;</a></span>UART_DATALINK_FRAMING_START_BYTE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_DATALINK_FRAMING_START_BYTE&#160;&#160;&#160;0x7b</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Start Byte </p>

</div>
</div>
<a id="ac2252b0f8428124b84eb325d640b0d8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2252b0f8428124b84eb325d640b0d8c">&sect;&nbsp;</a></span>UART_DATALINK_FRAMING_STOP_BYTE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_DATALINK_FRAMING_STOP_BYTE&#160;&#160;&#160;0x7c</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stop Byte </p>

</div>
</div>
<a id="a90db6b3ebc6f2bce86eec1f080ebbfab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90db6b3ebc6f2bce86eec1f080ebbfab">&sect;&nbsp;</a></span>UART_DATALINK_RX_ESC_BYTE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_DATALINK_RX_ESC_BYTE&#160;&#160;&#160;0x7d</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Escape Byte </p>

</div>
</div>
<a id="a2953d4b6be54ba442841ddf34f5081c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2953d4b6be54ba442841ddf34f5081c8">&sect;&nbsp;</a></span>UART_DATALINK_RX_START_BYTE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_DATALINK_RX_START_BYTE&#160;&#160;&#160;0x7b</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Start Byte </p>

</div>
</div>
<a id="aebae2704586f4a8f51c6d044157437e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebae2704586f4a8f51c6d044157437e6">&sect;&nbsp;</a></span>UART_DATALINK_RX_STATE_ESC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_DATALINK_RX_STATE_ESC&#160;&#160;&#160;0x02</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Escape Byte Received State </p>

</div>
</div>
<a id="aee5e9357cbd40f30ab04e9d7ab627142"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee5e9357cbd40f30ab04e9d7ab627142">&sect;&nbsp;</a></span>UART_DATALINK_RX_STATE_IDLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_DATALINK_RX_STATE_IDLE&#160;&#160;&#160;0x00</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Idle State </p>

</div>
</div>
<a id="ad9e8e98b3a1b163151a6b35d8655fb05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9e8e98b3a1b163151a6b35d8655fb05">&sect;&nbsp;</a></span>UART_DATALINK_RX_STATE_START</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_DATALINK_RX_STATE_START&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Start Byte Received State </p>

</div>
</div>
<a id="a4cba2066ed80175b5935d6f7e3519a63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cba2066ed80175b5935d6f7e3519a63">&sect;&nbsp;</a></span>UART_DATALINK_RX_STATE_STOP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_DATALINK_RX_STATE_STOP&#160;&#160;&#160;0x03</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stop Byte Received State </p>

</div>
</div>
<a id="a66de5275deafb24d531a959600a12f5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66de5275deafb24d531a959600a12f5c">&sect;&nbsp;</a></span>UART_DATALINK_RX_STOP_BYTE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_DATALINK_RX_STOP_BYTE&#160;&#160;&#160;0x7c</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stop Byte </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ac53614c0c475db20de3fff04fb01b3c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac53614c0c475db20de3fff04fb01b3c5">&sect;&nbsp;</a></span>UART_DATALINK_PACKET_MSP430_BUFFER_STRUCT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_u_a_r_t___l2___p_a_c_k_e_t___m_s_p430___b_u_f_f_e_r.html">UART_L2_PACKET_MSP430_BUFFER</a>  <a class="el" href="_u_a_r_t___l2_8h.html#ac53614c0c475db20de3fff04fb01b3c5">UART_DATALINK_PACKET_MSP430_BUFFER_STRUCT</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>UART Layer 2 Transmit Framing State Machine. </p>
<p>This structure defines the structure used to maintain the state machine that controls the byte framing of the Layer 2 UART transmit protocol. </p>

</div>
</div>
<a id="adcf7a574c5d9de1ceb93d5b1a97ee547"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcf7a574c5d9de1ceb93d5b1a97ee547">&sect;&nbsp;</a></span>UART_DATALINK_PACKET_STRUCT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_u_a_r_t___l2___p_a_c_k_e_t.html">UART_L2_PACKET</a>  <a class="el" href="_u_a_r_t___l2_8h.html#adcf7a574c5d9de1ceb93d5b1a97ee547">UART_DATALINK_PACKET_STRUCT</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>UART Layer 2 Packet Definiton Structure. </p>
<p>A structure that defines the layer 2 packet used by the Faraday UART network stack. This structure is used to directly make the packet and place into the transmit routine(s). </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ac7b3df0fa68526d64c732d5f916e34b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7b3df0fa68526d64c732d5f916e34b1">&sect;&nbsp;</a></span>init_uart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_uart </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize UART Layer 2 TX/RX State Machines. </p>
<p>This function initializes the Layer 2 UART transmit and receive state machines. Initialize values such as packet lengths and buffer sizes are initialized into the statemachines for proper operation. </p>

</div>
</div>
<a id="ad87829b6d6ba48eb341034a0ba17c5f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad87829b6d6ba48eb341034a0ba17c5f1">&sect;&nbsp;</a></span>uart_datalink_byte_isempty_rx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char uart_datalink_byte_isempty_rx </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if UART Layer 2 receive buffer is empty. </p>
<p>This function is used to check if the receive buffer is empty or contains at least 1 packet waiting for retrieval. This is a very useful function to create higher level "checks" to determine if there is waiting data to be retrieved without actually "popping" the data out of the FIFO.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Returns</td><td>1 if buffer is empty. Returns 0 if buffer NOT empty. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a63c4d64ae4f2bd7e735cd4f4004263c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63c4d64ae4f2bd7e735cd4f4004263c5">&sect;&nbsp;</a></span>uart_datalink_create_packet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uart_datalink_create_packet </td>
          <td>(</td>
          <td class="paramtype">volatile <a class="el" href="_u_a_r_t___l2_8h.html#adcf7a574c5d9de1ceb93d5b1a97ee547">UART_DATALINK_PACKET_STRUCT</a> *&#160;</td>
          <td class="paramname"><em>buffer_struct</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>packet_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>packet_config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>payload_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>payload</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create UART Layer 2 Packet. </p>
<p>This function creates a Layer 2 UART Packet for transmission. The function accepts several parameters that define the packet type, configuration bits, and other information.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer_struct</td><td>Pointer to a UART_DATALINK_PACKET_STRUCT structure that will be filled with the supplied parameters/data </td></tr>
    <tr><td class="paramname">packet_type</td><td>A byte that describes the packet type which indicates how to parse the packet when received </td></tr>
    <tr><td class="paramname">packet_config</td><td>Configuration bytes to support link communication and flag sharing. Not yet implemented </td></tr>
    <tr><td class="paramname">payload_length</td><td>Length of the payload data in bytes </td></tr>
    <tr><td class="paramname">payload</td><td>A pointer to the byte/array of data to be packed into the packet </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7f4ea313a52dd3e9b9f680429024e54a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f4ea313a52dd3e9b9f680429024e54a">&sect;&nbsp;</a></span>uart_datalink_get_tx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char uart_datalink_get_tx </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>get_buffer_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a UART layer 2 packet from receive buffer. </p>
<p>This function is used to retrieve a waiting UART layer 2 byte in the UART receive buffer if present.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">get_buffer_ptr</td><td>Pointer to an array that will be filled with the received byte if present in the receive buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">status</td><td>The function returns the status of the receive buffer Get() routine. If (status == 1) then retrieval of a byte was successful. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a67bc69c3ef2e11e0372662a5ede276e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67bc69c3ef2e11e0372662a5ede276e2">&sect;&nbsp;</a></span>uart_datalink_isempty_tx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char uart_datalink_isempty_tx </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if UART Layer 2 transmit buffer is empty. </p>
<p>This function is used to check if the transmit buffer is empty or contains at least 1 byte waiting for retrieval. This is a very useful function to create higher level "checks" to determine if there is waiting data to be retrieved without actually "popping" the data out of the FIFO.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Returns</td><td>1 if buffer is empty. Returns 0 if buffer NOT empty. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abc559fd267d9d8c575be67bd3e265351"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc559fd267d9d8c575be67bd3e265351">&sect;&nbsp;</a></span>uart_datalink_put_tx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char uart_datalink_put_tx </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>packet_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>packet_config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>payload_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>payload</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create and transmit UART layer 2 packet. </p>
<p>This function implements several other function to both create a UART layer 2 packet from the supplied parameters and will then place the packet into the transmit FIFO for UART transmission.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">packet_type</td><td>A byte that describes the packet type which indicates how to parse the packet when received </td></tr>
    <tr><td class="paramname">packet_config</td><td>Configuration bytes to support link communication and flag sharing. Not yet implemented </td></tr>
    <tr><td class="paramname">payload_length</td><td>Length of the payload data in bytes </td></tr>
    <tr><td class="paramname">payload</td><td>A pointer to the byte/array of data to be packed into the packet</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">status</td><td>The function returns the status of the FIFO Put() operations. If (status == 1) then placing packet into FIFO was successfull </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0c5d79acaccffa349f366585a9b944a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c5d79acaccffa349f366585a9b944a5">&sect;&nbsp;</a></span>uart_datalink_rx_frame_parser_change_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uart_datalink_rx_frame_parser_change_state </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change the current state of the receive byte frame parser state machine. </p>
<p>This function allows you to change the current state of the receive byte frame parser state machine.</p>
<p>Change the current state of the receive byte frame parser state machine. </p>

</div>
</div>
<a id="a6a35d37b82cc1e3975df2f13a3779904"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a35d37b82cc1e3975df2f13a3779904">&sect;&nbsp;</a></span>uart_datalink_rx_frame_parser_check_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char uart_datalink_rx_frame_parser_check_state </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check the current UART receiver byte frame parser state machine state. </p>
<p>This function checks and returns the current state of the state machine responsible for parsing received bytes into frames that contain UART layer 2 packets. The UART layer 2 implements a simple byte escape framing protocol.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">uart_datalink_frame_rx_state</td><td>Returns the current state of the receive byte frame parsing state machine</td></tr>
  </table>
  </dd>
</dl>
<p>Check the current UART receiver byte frame parser state machine state.</p>
<ul>
<li></li>
</ul>

</div>
</div>
<a id="a960448902e9fadb313a6f19103d9a35b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a960448902e9fadb313a6f19103d9a35b">&sect;&nbsp;</a></span>uart_datalink_rx_frame_parser_state_esc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uart_datalink_rx_frame_parser_state_esc </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>new_byte</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>UART layer 2 receiver frame parser ESCAPE state routine. </p>
<p>This is the ESCAPE state state machine routing that contains the operations executed during ESCAPE state on each received byte. In ESCAPE state the next byte will be a START/STOP/ESCAPE byte but is actually a portion of data to be parsed and saved. If the next byte is not a START/STOP/ESCAPE byte then corruption has occured and is an error (no error indication provided).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">new_byte</td><td>The byte to be parsed by the receive byte escape state machine</td></tr>
  </table>
  </dd>
</dl>
<p>UART layer 2 receiver frame parser ESCAPE state routine. </p>

</div>
</div>
<a id="a0dd8b8c8ac31926f0d3a3bc05fec28a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dd8b8c8ac31926f0d3a3bc05fec28a6">&sect;&nbsp;</a></span>uart_datalink_rx_frame_parser_state_idle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uart_datalink_rx_frame_parser_state_idle </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>new_byte</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>UART layer 2 receiver frame parser IDLE state routine. </p>
<p>This is the IDLE state state machine routine that contains the operations executed during IDLE state on each received byte. In IDLE the state machine searches for the START byte.</p>
<p>If the START byte is found then the following bytes contain a new packet. The reception of an IDLE byte resets the packet saving buffers and sets the state machine into the next state (Start)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">new_byte</td><td>The byte to be parsed by the receive byte escape state machine</td></tr>
  </table>
  </dd>
</dl>
<p>UART layer 2 receiver frame parser IDLE state routine. </p>

</div>
</div>
<a id="ab9d26f59f7a919d9e2c8ebcf71a34d0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9d26f59f7a919d9e2c8ebcf71a34d0c">&sect;&nbsp;</a></span>uart_datalink_rx_frame_parser_state_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uart_datalink_rx_frame_parser_state_start </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>new_byte</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>UART layer 2 receiver frame parser START state routine. </p>
<p>This is the START state state machine routing that contains the operations executed during START state on each received byte. In START state each byte is expected to be part of a packet. The START state searches for new data bytes, ESCAPE byte, STOP byte, and START bytes.</p>
<ul>
<li>START byte: If a START byte is received a new frame is assumed to have started and all prior data will be reset</li>
<li>STOP byte: If a STOP byte is received this indicates the end of a frame and the state machine will tranfer the parsed frame contents to the appropriate functions for further parsing of layer 2 packets</li>
<li>ESCAPE byte: If an ESCAPE byte is recieved this indicates that the following byte is a START/STOP/ESCAPE byte but is actually a portion of the data and should be treat accordingly</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">new_byte</td><td>The byte to be parsed by the receive byte escape state machine</td></tr>
  </table>
  </dd>
</dl>
<p>UART layer 2 receiver frame parser START state routine. </p>

</div>
</div>
<a id="ac032a2e63152c8832e5c1884881076e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac032a2e63152c8832e5c1884881076e6">&sect;&nbsp;</a></span>uart_datalink_rx_frame_parser_state_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uart_datalink_rx_frame_parser_state_stop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>UART layer 2 receiver frame parser STOP state routine. </p>
<p>This is the STOP state state machine routing that contains the operations executed during STOP state on each received byte. In STOP state the frame is complete and ready to be passed to the higher layer interface. The parser <a class="el" href="_u_a_r_t___l2_8h.html#aad11fa669cfb8134e56b1aed868f4560" title="UART layer 2 receiver high level state machine parser. ">uart_datalink_rx_framer_parser_parse_byte()</a> actually handles the removal and passing of payload data to the higher layer. This STOP state simply needs to change the state machine to IDLE state since all STOP actions are complete when the state machine operates the STOP routine (parser already performed STOP state actions immediately after rescieving STOP).</p>
<p>UART layer 2 receiver frame parser STOP state routine. </p>

</div>
</div>
<a id="aad11fa669cfb8134e56b1aed868f4560"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad11fa669cfb8134e56b1aed868f4560">&sect;&nbsp;</a></span>uart_datalink_rx_framer_parser_parse_byte()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uart_datalink_rx_framer_parser_parse_byte </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>new_byte</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>UART layer 2 receiver high level state machine parser. </p>
<p>This function is the high level parser routine that when executed checks the current state machine state and operates the respective state routine to properly parse the received framing/data byte.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">new_byte</td><td>The byte to be parsed by the receive byte escape state machine</td></tr>
  </table>
  </dd>
</dl>
<p>UART layer 2 receiver high level state machine parser. </p>

</div>
</div>
<a id="abfced9c8c49fca45b437c389b356b498"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfced9c8c49fca45b437c389b356b498">&sect;&nbsp;</a></span>uart_datalink_rx_housekeep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uart_datalink_rx_housekeep </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>UART layer 2 receive housekeeping. </p>
<p>UART layer 2 receive housekeeping routine that performs actions needed on a reoccuring basis to enable the layer 2 protocol functionality. Actions such a checking for new data waiting to be retrieve are performed.</p>
<p>The receive housekeeping actions retrieve a waiting UART packet from the buffer if available and then parses it. When the parsing routine is complete it moves the parsed packet to the network layer above.</p>
<dl class="section note"><dt>Note</dt><dd>A while() loop is used to retrieve, parse, and move data to the next highest network layer continuously until the receive buffer is empty. </dd></dl>

</div>
</div>
<a id="a80a393448695d1ec96dce4f9094a783a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80a393448695d1ec96dce4f9094a783a">&sect;&nbsp;</a></span>uart_datalink_rx_pass_higher_layer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uart_datalink_rx_pass_higher_layer </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>datagram_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>datagram</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>UART layer 2 receiver higher OSI layer interface. </p>
<p>This function is used to pass the parsed UART layer 2 packet data payload into the next higher OSI layer in the network stack. This is the only location in the UART layer 2 protocol that must know about and interact with the next higher OSI layer services.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">datagram_len</td><td>The length of the supplied datagram (packet) in bytes </td></tr>
    <tr><td class="paramname">datagram</td><td>A pointer to the byte array containing the UART layer 2 data payload which is actually a higher layer packet</td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000031">Todo:</a></b></dt><dd>Update this interface with a function pointer based interface that can be dynamically "registered" like the UART Layer 4 service ports. This will remove the need to include layer 4 header files and function calls.</dd></dl>

</div>
</div>
<a id="a642642befe890ebd6eff7d8ccb003a4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a642642befe890ebd6eff7d8ccb003a4f">&sect;&nbsp;</a></span>uart_datalink_rx_put_byte()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uart_datalink_rx_put_byte </td>
          <td>(</td>
          <td class="paramtype">volatile unsigned char *&#160;</td>
          <td class="paramname"><em>data_byte</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Place a byte into the receive buffer for uart layer 2. </p>
<p>This function allows you to place a received uart byte into the recieve buffer for further parsing.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data_byte</td><td>A pointer to the byte that will be placed into the receive byte buffer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a13c914a747e1af18c9b68577d3c676c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13c914a747e1af18c9b68577d3c676c1">&sect;&nbsp;</a></span>uart_datalink_tx_housekeep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uart_datalink_tx_housekeep </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>UART layer 2 transmit housekeeping. </p>
<p>UART layer 2 transmit housekeeping routine that performs actions needed on a reoccuring basis to enable the layer 2 protocol functionality. Actions such a checking for new data waiting to be transmitted are performed.</p>
<p>The transmit UART houskeeping retrieves a waiting byte to be transmitted over UART into a global structure and intializes control flags used for transmission. The <a class="el" href="_faraday___h_a_l_8c.html#afd8af7f055c15f75feddf75285d664ec" title="Enable the UART UCA0IFG transmitter &quot;UCTXIFG&quot; flag. ">hal_uart_set_uctxifg()</a> function sets the UART controller transmit interrupt flag to 1 and begins the interrupt base UART transmissions. After each byte the interrupts will cause the next byte to be retrieved until the buffer is empty. An analogy can be made to "kicking" a wheel that keeps rolling until the bottom of the hill.</p>
<p>If data is continuously loaded into the buffer the transmissions will continously occure until new data is no longer placed into the buffer and the buffer empties. </p>

</div>
</div>
<a id="a4840060f1b1b517dd7ca2dfd9fdb2446"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4840060f1b1b517dd7ca2dfd9fdb2446">&sect;&nbsp;</a></span>uart_tx_datalink_isr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uart_tx_datalink_isr </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>UART layer 2 transmit interrupt service routine. </p>
<p>This function contains all the needed actions that are to be performed when a UART transmit interrupt occures. Transmit interrupts occur when a prior byte has completed transmission and the device is ready for the next byte if available. The ISR routine checks if another byte is waiting for be transmitted and transmits it if so, otherwise the ISR stops the transmit "wheel" from turning and enters an inactive state. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_ebc9cec7537ff1d4a79631ef79929747.html">UART</a></li><li class="navelem"><a class="el" href="_u_a_r_t___l2_8h.html">UART_L2.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.12 </li>
  </ul>
</div>
</body>
</html>
